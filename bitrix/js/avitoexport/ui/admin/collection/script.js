this.BX=this.BX||{},this.BX.AvitoExport=this.BX.AvitoExport||{},this.BX.AvitoExport.Ui=this.BX.AvitoExport.Ui||{},function(t){"use strict";var e;const n=null!=(e=window.AvitoJQuery)?e:window.$;class i{constructor(t,e={}){this.$el=n(t),this.el=this.$el[0],this.options=Object.assign({},this.constructor.defaults,this.$el.data(),e)}destroy(){this.el=null}getElement(t,e,n){const i=this.getElementSelector(t);return this.getNode(i,e,n||"find")}getElementSelector(t){const e=t+"Element";return this.options[e]}getTemplate(t){const e=t+"Template",n=this.options[e],i=n.substring(0,1);let s;return s="."===i||"#"===i?this.getNode(n).html():n,s}getNode(t,e,i="find"){return"#"===t.substring(0,1)?e=n(document):e||(e=this.$el),e[i](t)}getLang(t,e){let n,i;return null!=this.options.lang&&t in this.options.lang?i=this.options.lang[t]:(n=this.options.langPrefix+t,i=BX.message(n)||""),i&&e&&(i=function(t,e){let n=t;for(const t in e){if(!e.hasOwnProperty(t))continue;const i="#"+t+"#",s=e[t];do{n=n.replace(i,s)}while(-1!==n.indexOf(i))}return n}(i,e)),i}}i.defaults={lang:{},langPrefix:null};class s extends i{constructor(t,e={}){super(t,e),this.delete=t=>{t.preventDefault();const e=$(t.target),n=this.getElement("item",e,"closest"),i=this.getElement("add",n),s=this.getElement("item",n,"prev");if(0===s.length&&0!==i.length){return this.getElement("select",n).prop("selectedIndex",0),!1}0!==i.length&&i.clone(!0).appendTo(s.find("td")),n.remove(),this.recalculateIndexes()},this.add=t=>{t.preventDefault();const e=$(t.target),n=this.getElement("item",e,"closest"),i=n.clone(!0,!0).insertAfter(n);e.remove();const s=this.getElement("select",i),l=parseInt(s.data("index"))+1;this.changeNameIndex(s,l)},this.bind()}bind(){this.handleDeleteClick(!0),this.handleAddClick(!0)}handleDeleteClick(t){this.getElement("delete")[t?"on":"off"]("click",this.delete)}handleAddClick(t){this.getElement("add")[t?"on":"off"]("click",this.add)}recalculateIndexes(){this.getElement("item").each(((t,e)=>{const n=this.getElement("select",$(e));this.changeNameIndex(n,t)}))}changeNameIndex(t,e){t.prop("name",`${this.options.inputName}[${e}]`),t.data("index",e),t.attr("data-index",e)}}s.defaults={inputName:null,itemElement:".js-input-collection__item",selectElement:".js-input-collection__select",deleteElement:".js-input-collection__delete",addElement:".js-input-collection__add"},t.Collection=s}(this.BX.AvitoExport.Ui.Admin=this.BX.AvitoExport.Ui.Admin||{});
//# sourceMappingURL=script.js.map
